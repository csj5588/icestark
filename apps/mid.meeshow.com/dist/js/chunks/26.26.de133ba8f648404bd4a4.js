(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1024:function(t,e,n){"use strict";n.r(e);var a=n(75),r=n.n(a),i=n(6),o=n.n(i),s=n(8),l=n.n(s),c=n(9),u=n.n(c),f=n(12),p=n.n(f),d=n(0),g=n.n(d),b=n(1),h=n.n(b),y=n(5),m=n.n(y),v=n(26),D=function(t){function e(n){l()(this,e);var a=u()(this,t.call(this,n));a.handleChange=function(t){var e=a.props,n=e.disabled,r=e.onChange;n||("checked"in a.props||a.setState({checked:t.target.checked}),r&&r({target:o()({},a.props,{checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},a.saveInput=function(t){a.input=t};var r="checked"in n?n.checked:n.defaultChecked;return a.state={checked:r},a}return p()(e,t),e.getDerivedStateFromProps=function(t,e){return"checked"in t?o()({},e,{checked:t.checked}):null},e.prototype.focus=function(){this.input.focus()},e.prototype.blur=function(){this.input.blur()},e.prototype.render=function(){var t,e=this.props,n=e.prefixCls,a=e.className,i=e.style,s=e.name,l=e.id,c=e.type,u=e.disabled,f=e.readOnly,p=e.tabIndex,d=e.onClick,b=e.onFocus,h=e.onBlur,y=e.autoFocus,v=e.value,D=r()(e,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","autoFocus","value"]),k=Object.keys(D).reduce(function(t,e){return"aria-"!==e.substr(0,5)&&"data-"!==e.substr(0,5)&&"role"!==e||(t[e]=D[e]),t},{}),w=this.state.checked,O=m()(n,a,((t={})[n+"-checked"]=w,t[n+"-disabled"]=u,t));return g.a.createElement("span",{className:O,style:i},g.a.createElement("input",o()({name:s,id:l,type:c,readOnly:f,disabled:u,tabIndex:p,className:n+"-input",checked:!!w,onClick:d,onFocus:b,onBlur:h,onChange:this.handleChange,autoFocus:y,ref:this.saveInput,value:v},k)),g.a.createElement("span",{className:n+"-inner"}))},e}(d.Component);D.propTypes={prefixCls:h.a.string,className:h.a.string,style:h.a.object,name:h.a.string,id:h.a.string,type:h.a.string,defaultChecked:h.a.oneOfType([h.a.number,h.a.bool]),checked:h.a.oneOfType([h.a.number,h.a.bool]),disabled:h.a.bool,onFocus:h.a.func,onBlur:h.a.func,onChange:h.a.func,onClick:h.a.func,tabIndex:h.a.oneOfType([h.a.string,h.a.number]),readOnly:h.a.bool,autoFocus:h.a.bool,value:h.a.any},D.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){}},Object(v.polyfill)(D);var k=D;e.default=k},1064:function(t,e,n){var a=n(77);t.exports=function(){return a.Date.now()}},1200:function(t,e,n){},921:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=(n(66),n(11)),o=n.n(i),s=n(1),l=n.n(s),c=(n(406),n(280)),u=n.n(c),f=(n(116),n(61)),p=n.n(f),d=(n(410),n(207)),g=n.n(d),b=(n(1125),n(1126)),h=n.n(b),y=(n(156),n(10)),m=n.n(y),v=(n(983),n(941)),D=n.n(v),k=(n(403),n(278)),w=n.n(k),O=(n(405),n(200)),_=n.n(O),E=n(133),S=n.n(E);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(n,!0).forEach(function(e){x(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n(1200);var R=_.a.Option,z=function(t){function e(t){var n,a,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,i=L(e).call(this,t),(n=!i||"object"!==T(i)&&"function"!=typeof i?N(a):i).dragStartGift=function(t,e){e.dataTransfer.setData("text/plain",null),e.stopPropagation();var a=n.state.giftResource;n.setState({insertGift:a[t]})},n.dragEndGift=function(t,e){},n.dragHandle=function(t,e){},n.dragStart=function(t,e){e.dataTransfer.setData("text/plain",null),e.stopPropagation();for(var a=n.state.listData,r=0;r<a.length;r++)a[r].isDrag=t===r;n.setState({insertGift:null,startIndex:t,listData:a})},n.dragEnd=function(t,e){for(var a=n.state.listData,r=0;r<a.length;r++)delete a[r].isDrag;n.setState({listData:a}),e.preventDefault(),e.stopPropagation()},n.dragOver=function(t,e){e.preventDefault(),e.stopPropagation()},n.dragEnter=function(t,e){},n.dragLeave=function(t,e){},n.dropHandle=function(t,e){e.currentTarget;var a=n.state,r=a.listData,i=a.startIndex,s=a.insertGift;if(1!==j({},r[t]).lock)return s?r.find(function(t){return t.id===s.id})?void o.a.warning("\u793c\u7269\u5df2\u7ecf\u5b58\u5728\u793c\u7269\u5899\uff0c\u4e0d\u80fd\u91cd\u590d\u63d2\u5165!"):r[t].id?void w.a.confirm({width:500,title:"\u9009\u62e9\u6dfb\u52a0\u65b9\u5f0f",content:"",onOk:n.insertNew.bind(N(n),t),onCancel:n.replaceOld.bind(N(n),t),okText:"\u76ee\u6807\u4f4d\u7f6e\u793c\u7269\u53ca\u540e\u9762\u793c\u7269\u6574\u4f53\u540e\u79fb",cancelText:"\u8986\u76d6\u5f53\u524d\u793c\u7269"}):void n.replaceOld(t):void(i!==t&&w.a.confirm({width:500,title:"\u9009\u62e9\u79fb\u52a8\u65b9\u5f0f",content:"",onOk:n.insertStartIndex.bind(N(n),t),onCancel:n.exchangePosition.bind(N(n),t),okText:"\u76ee\u6807\u4f4d\u7f6e\u793c\u7269\u53ca\u540e\u9762\u4f4d\u7f6e\u793c\u7269\u6574\u4f53\u540e\u79fb",cancelText:"\u8c03\u6362\u4e24\u4e2a\u793c\u7269\u4f4d\u7f6e"}));o.a.warning("\u5f53\u524d\u4f4d\u7f6e\u9501\u5b9a,\u8bf7\u5148\u89e3\u9501")},n.delHandle=function(t,e){var a=n.state.listData;a[t]={},n.setState(a)},n.lockHandle=function(t,e){var a=n.state.listData,r=a[t].lock;a[t].lock=1^r,n.setState(a)},n.handleChangeTab=function(t){t!==n.state.selectTab&&n.props.handleChangeType(n.state.selectBz,t)},n.handleChangeType=function(t){var e=t.target.value;e!==n.state.selectBz&&n.props.handleChangeType(e,n.state.selectTab)},n.saveData=function(){for(var t=[],e=n.state.listData,a=0,r=0;r<e.length;r++)if(e[r].id){if(1===a){a=2;break}}else a=1;if(2!==a){n.state.listData.forEach(function(e,n){e.id&&t.push(e.id)}),t.length;var i=j({},n.state.wallData,{gift_ids:t});delete i.gifts,n.props.handleSubmit(i)}else o.a.error("\u4e2d\u95f4\u4e0d\u80fd\u4e3a\u7a7a")},n.renderExtra=function(){return r.a.createElement("div",null,n.renderType(),n.renderTab())},n.renderTab=function(){var t=n.state,e=t.tabList,a=t.selectTab;return a?r.a.createElement(_.a,{defaultValue:a,style:{width:120,height:20},onChange:n.handleChangeTab},e.map(function(t,e){return r.a.createElement(R,{value:t.id,key:e},t.name)})):null},n.renderType=function(){var t=n.state,e=t.settings,a=t.selectBz;if(!a||!e.wall_settings||!e.wall_settings.buz_type_enum)return null;var i=e.wall_settings.buz_type_enum;return r.a.createElement(D.a.Group,{defaultValue:a,style:{marginRight:"50px"},onChange:n.handleChangeType},i.map(function(t,e){return r.a.createElement(D.a,{value:t.value,key:e},t.name)}))},n.isLoading=!1,n.onScrollList=function(t){var e=t.target,a=e.scrollTop,r,i;e.scrollHeight-e.clientHeight-a>40||n.isLoading||(n.isLoading=!0,setTimeout(function(){n.isLoading=!1},1e3),n.props.getMoreResource())};var s=t.tabList,l=void 0===s?[]:s,c=t.giftResource,u=void 0===c?[]:c,f=t.settings,p=void 0===f?{}:f,d=t.wallData,g=void 0===d?{}:d,b=n.initList(g.gifts||[]);return n.state={selectTab:g.tab_id,selectBz:g.bz_type,tabList:l,settings:p,startIndex:0,wallData:g,listData:b,giftResource:u,insertGift:null},n}var n,i,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,a.Component),n=e,(i=[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){var e=this.props.wallData,n=t.wallData,a=t.tabList,r=void 0===a?[]:a,i=t.settings,o=void 0===i?{}:i,s=t.giftResource;if(e.tab_id!==n.tab_id||e.bz_type!==n.bz_type){var l=this.initList(n.gifts||[]);this.setState({selectTab:n.tab_id,selectBz:n.bz_type,wallData:n,listData:l,tabList:r,settings:o,giftResource:s})}else this.setState({tabList:r,settings:o,giftResource:s})}},{key:"componentDidUpdate",value:function(t,e){}},{key:"componentWillUnmount",value:function(){}},{key:"initList",value:function(t){if(t&&t.length>80)return t;t.length=80;for(var e=0;e<t.length;e++){var n=t[e];n&&2===n.enable&&(n.isDisabled=!0),n&&new Date(n.end_time).getTime()<Date.now()&&(n.isDisabled=!0),t[e]||(t[e]={})}return t}},{key:"insertNew",value:function(t){var e=this.state,n=e.listData,a=e.insertGift;n.splice(t,0,a),this.setState({listData:n})}},{key:"replaceOld",value:function(t){var e=this.state,n=e.listData,a=e.insertGift;n.splice(t,1,a),this.setState({listData:n})}},{key:"exchangePosition",value:function(t){var e=this.state,n=e.listData,a=e.startIndex,r=j({},n[t]);if(1!==r.lock){var i=j({},n[a]);n.splice(t,1,i),n.splice(a,1,r),this.setState({listData:n})}}},{key:"insertStartIndex",value:function(t){var e=this.state,n=e.listData,a=e.startIndex,r=n.splice(a,1,{})[0];n.splice(t,0,r),this.setState({listData:n})}},{key:"renderItem",value:function(t,e,n){return this.state.listData,r.a.createElement("div",{className:"item "+(t.isDrag?"is-drag ":"")+(t.isDisabled?"is-disabled ":""),onDrag:this.dragHandle.bind(this,e),onDragStart:this.dragStart.bind(this,e),onDragEnd:this.dragEnd.bind(this,e),onDragOver:this.dragOver.bind(this,e),onDragEnter:this.dragEnter.bind(this,e),onDragLeave:this.dragLeave.bind(this,e),onDrop:this.dropHandle.bind(this,e),draggable:!t.lock,key:e+"_"+t.id},t.id?r.a.createElement(r.a.Fragment,null," ",r.a.createElement("div",{className:"image",style:{backgroundImage:"url("+t.resource.gift_url_2x+")"}}),r.a.createElement("div",{className:"name"},t.name),r.a.createElement("div",{className:"price"},t.currency_num,n),r.a.createElement("div",{className:"gift-id"},"ID: ",t.id),r.a.createElement("div",{className:"status "+(t.isDisabled?"is-disabled ":"")},t.isDisabled?"\u5df2\u5931\u6548":S()(new Date(t.end_time)).format("YYYY-MM-DD HH:mm")+"\u8fc7\u671f"),r.a.createElement(m.a,{type:"delete",className:"del-btn",title:"\u70b9\u51fb\u5220\u9664",onClick:this.delHandle.bind(this,e)}),r.a.createElement(m.a,{type:0===t.lock?"unlock":"lock",className:"lock-btn "+(1===t.lock&&"is-locked"),title:0===t.lock?"\u70b9\u51fb\u9501\u5b9a":"\u70b9\u51fb\u89e3\u9501",onClick:this.lockHandle.bind(this,e)})):null)}},{key:"renderGiftItem",value:function(t,e,n){return r.a.createElement("div",{className:"item ",onDragStart:this.dragStartGift.bind(this,e),onDragEnd:this.dragEndGift.bind(this,e),draggable:!0,key:e+"_"+t.id},r.a.createElement("div",{className:"image",style:{backgroundImage:"url("+t.resource.gift_url_2x+")"}}),r.a.createElement("div",{className:"name"},t.name),r.a.createElement("div",{className:"price"},t.currency_num,n),r.a.createElement("div",{className:"gift-id"},"ID: ",t.id))}},{key:"render",value:function(){var t=this,e=this.state,n=e.listData,a=e.giftResource,i=this.state.settings.gift_settings,o="";if(i&&a[0]){var s=i.currency_settings.filter(function(t){return t.currency_key===a[0].currency_type})[0];o=s?s.currency_name:""}return r.a.createElement("div",{className:"component-drag-sort"},r.a.createElement(u.a,{gutter:16,className:"choose-sort-wrap"},r.a.createElement(g.a,{span:12},r.a.createElement(h.a,{title:"\u793c\u7269\u6e90\u5217\u8868",bodyStyle:{padding:0,height:"675px",overflow:"auto"},onScroll:this.onScrollList},r.a.createElement("div",{className:"gift-list"},a.map(function(e,n){return t.renderGiftItem(e,n,o)})))),r.a.createElement(g.a,{span:12},r.a.createElement(h.a,{title:"\u5f53\u524d\u793c\u7269\u5899",extra:this.renderExtra(),bodyStyle:{padding:0}},r.a.createElement("div",{className:"sort-list"},n.map(function(e,n){return t.renderItem(e,n,o)})),r.a.createElement("div",{style:{padding:"20px",textAlign:"center"}},r.a.createElement(p.a,{type:"primary",onClick:this.saveData.bind(this)},"\u4fdd\u5b58\u63d0\u4ea4"))))))}}])&&C(n.prototype,i),e}();z.propTypes={tabList:l.a.array,giftResource:l.a.array,wallData:l.a.object,settings:l.a.object,selectBz:l.a.number,selectTab:l.a.number,handleChangeType:l.a.func,handleSubmit:l.a.func,getMoreResource:l.a.func},z.defaultProps={};var G=n(7),M=n(3),B=n(22);G.a.getToken();var F=M.a.APIS.root,H=Object(B.getRequestsByRoot)({root:F}),W=H.get,A=H.post,U=H.postXForm,Y=new function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getSettings=W("api/v1/gift_wall/settings"),this.getTabList=W("api/v1/gift_wall/wall_tab/list"),this.getAllGift=W("api/v1/gift_wall/gift_pool/list"),this.getDataList=W("api/v1/gift_wall/wall/detail"),this.postDataAdd=A("api/v1/gift_wall/wall/add"),this.postDataModify=A("api/v1/gift_wall/wall/update"),this.postDataDel=U("login/rbac/module/data_del")};function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(n,!0).forEach(function(e){X(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Q(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Q(this,Z(e).call(this,t))).giftParams={enable:1,page:1,size:30,hasMore:!0},n.state={settings:{},selectTab:0,selectBz:0,tabList:[],giftData:[],wallData:{}},n}var n,i,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(e,a.Component),n=e,(i=[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var t=this;Promise.all([this.getTabList(),this.getSettings(),this.getGiftList()]).then(function(e){t.setState(q({},e[0],{},e[1],{giftData:e[2]}),t.getSortList.bind(t))})}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(t,e){}},{key:"componentWillUnmount",value:function(){}},{key:"getSettings",value:function(){return Y.getSettings({wall_settings:1,gift_settings:1}).then(function(t){var e=t.data;return{settings:e,selectBz:e.wall_settings.buz_type_enum[0].value}})}},{key:"getTabList",value:function(){return Y.getTabList({size:100,enable:1}).then(function(t){var e=t.data.data;return{tabList:e,selectTab:e[0].id}})}},{key:"getGiftList",value:function(){var t=this;return Y.getAllGift(q({},this.giftParams)).then(function(e){var n=e.data,a=t.state.giftData;return a=a.concat(n.data||[]),t.giftParams.hasMore=n.page.has_more,a})}},{key:"getSortList",value:function(){var t=this,e=this.state,n={bz_type:e.selectBz,tab_id:e.selectTab};return Y.getDataList(q({},n)).then(function(e){var a=q({},e.data.data,{},n);t.setState({wallData:a})})}},{key:"changeType",value:function(t,e){this.setState({selectBz:t,selectTab:e},this.getSortList.bind(this))}},{key:"submitData",value:function(t){Y[t.id?"postDataModify":"postDataAdd"](t).then(function(t){o.a.success("success")})}},{key:"getMoreResource",value:function(){var t=this;this.giftParams.hasMore&&(this.giftParams.page++,this.getGiftList().then(function(e){t.setState({giftData:e})}))}},{key:"render",value:function(){var t=this.state,e=t.tabList,n=t.giftData,a=t.settings,i=(t.selectBz,t.selectTab,t.wallData);return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{tabList:e,giftResource:n,wallData:i,settings:a,handleChangeType:this.changeType.bind(this),handleSubmit:this.submitData.bind(this),getMoreResource:this.getMoreResource.bind(this)}))}}])&&K(n.prototype,i),e}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function at(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}tt.propTypes={},tt.defaultProps={},n.d(e,"default",function(){return ot});var ot=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=at(this,rt(e).call(this,t))).state={},n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,a.Component),n=e,(i=[{key:"render",value:function(){return r.a.createElement("div",{className:"gift-icon-page"},r.a.createElement(tt,null))}}])&&nt(n.prototype,i),e}()},961:function(t,e,n){var a=n(134),r=n(1064),i=n(420),o="Expected a function",s=Math.max,l=Math.min;t.exports=function(t,e,n){var c,u,f,p,d,g,b=0,h=!1,y=!1,m=!0;if("function"!=typeof t)throw new TypeError(o);function v(e){var n=c,a=u;return c=u=void 0,b=e,p=t.apply(a,n)}function D(t){var n=t-g;return void 0===g||n>=e||n<0||y&&t-b>=f}function k(){var t=r();if(D(t))return w(t);d=setTimeout(k,function(t){var n=e-(t-g);return y?l(n,f-(t-b)):n}(t))}function w(t){return d=void 0,m&&c?v(t):(c=u=void 0,p)}function O(){var t=r(),n=D(t);if(c=arguments,u=this,g=t,n){if(void 0===d)return function(t){return b=t,d=setTimeout(k,e),h?v(t):p}(g);if(y)return clearTimeout(d),d=setTimeout(k,e),v(g)}return void 0===d&&(d=setTimeout(k,e)),p}return e=i(e)||0,a(n)&&(h=!!n.leading,f=(y="maxWait"in n)?s(i(n.maxWait)||0,e):f,m="trailing"in n?!!n.trailing:m),O.cancel=function(){void 0!==d&&clearTimeout(d),b=0,c=g=u=d=void 0},O.flush=function(){return void 0===d?p:w(r())},O}}}]);